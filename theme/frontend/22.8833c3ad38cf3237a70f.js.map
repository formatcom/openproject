{"version":3,"sources":["./src/app/modules/augmenting/dynamic-scripts/repository_settings.js"],"names":["jQuery","$","toggleContent","content","selected","targetName","val","oldTargets","find","not","newTarget","prop","hide","show","change","select","this","url","URI","data","search","scm_vendor","window","location","href","toString","each","_i","el","fs","name","attr","switches","headers","first","focus","checkedInput","length","on","setTimeout","document","getElementsByName","value"],"mappings":"+EA4BAA,QAAO,SAASC,GACd,IAAIC,EAAgB,SAASC,EAAQC,GACnC,IACEC,EAAa,IADFJ,EAAE,eAAeK,MACA,IAAMF,EAClCG,EAAaJ,EAAQK,KAAK,qBAAqBC,IAAIJ,GACjDK,EAAaV,OAAOK,GAOxBE,EACGC,KAAK,gBACLG,KAAK,YAAY,GACpBJ,EAAWK,OAEXF,EACGF,KAAK,gBACLC,IAAI,0BACJE,KAAK,YAAY,GACpBD,EAAUG,QAIZZ,EAAE,gCAAgCa,QAAO,WACvC,IAAIC,EAASd,EAAEe,MACXC,EAAMC,IAAIH,EAAOI,KAAK,QAAQC,OAAO,CAAEC,WAAYN,EAAOT,QAE9DgB,OAAOC,SAASC,KAAOP,EAAIQ,cAG7BxB,EAAE,4BACCyB,MAAK,SAASC,EAAIC,GAEjB,IAAIC,EAAK5B,EAAE2B,GACTE,EAAOD,EAAGE,KAAK,eACfC,EAAWH,EAAGrB,KAAK,UAAYsB,EAAO,MACtCG,EAAUJ,EAAGrB,KAAK,kCAClBL,EAAUF,EAAE2B,GAGdK,EAAQC,QAAQC,QAGhB,IAAIC,EAAepC,OAAO,gCACvBoC,EAAaC,OAAS,GACvBnC,EAAcC,EAASiC,EAAa9B,OAItCN,OAAO,eAAesC,GAAG,UAAU,WACjChB,OAAOiB,YAAW,WAChBC,SAASC,kBAAkB,YAAY,GAAGN,UACzC,QAILH,EAASM,GAAG,UAAU,WACpBpC,EAAcC,EAASa,KAAK0B","file":"22.8833c3ad38cf3237a70f.js","sourcesContent":["//-- copyright\n// OpenProject is an open source project management software.\n// Copyright (C) 2012-2020 the OpenProject GmbH\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License version 3.\n//\n// OpenProject is a fork of ChiliProject, which is a fork of Redmine. The copyright follows:\n// Copyright (C) 2006-2017 Jean-Philippe Lang\n// Copyright (C) 2010-2013 the ChiliProject Team\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License\n// as published by the Free Software Foundation; either version 2\n// of the License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program; if not, write to the Free Software\n// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n//\n// See docs/COPYRIGHT.rdoc for more details.\n//++\n\njQuery(function($){\n  var toggleContent = function(content,selected) {\n    var vendor = $('#scm_vendor').val(),\n      targetName = '#' + vendor + '-' + selected,\n      oldTargets = content.find('.attributes-group').not(targetName);\n    var newTarget  = jQuery(targetName);\n\n    // would work with fieldset#disabled, but that's bugged up unto IE11\n    // https://connect.microsoft.com/IE/feedbackdetail/view/962368/\n    //\n    // Ugly workaround: disable all inputs manually, but\n    // spare enabling inputs marked with `aria-disabled`\n    oldTargets\n      .find('input,select')\n      .prop('disabled', true);\n    oldTargets.hide();\n\n    newTarget\n      .find('input,select')\n      .not('[aria-disabled=\"true\"]')\n      .prop('disabled', false);\n    newTarget.show();\n  };\n\n  // Submit form when\n  $('.repositories--remote-select').change(function() {\n    var select = $(this);\n    var url = URI(select.data('url')).search({ scm_vendor: select.val() });\n\n    window.location.href = url.toString();\n  });\n\n  $(\"[data-switch='scm_type']\")\n    .each(function(_i, el) {\n\n      var fs = $(el),\n        name = fs.attr('data-switch'),\n        switches = fs.find('[name=\"' + name + '\"]'),\n        headers = fs.find('.attributes-group--header-text'),\n        content = $(el);\n\n      // Focus on first header\n      headers.first().focus();\n\n      // Open content if there is only one possible selection\n      var checkedInput = jQuery('input[name=scm_type]:checked');\n      if(checkedInput.length > 0) {\n        toggleContent(content, checkedInput.val());\n      }\n\n      // Necessary for accessibilty purpose\n      jQuery('#scm_vendor').on('change', function(){\n        window.setTimeout(function(){\n          document.getElementsByName('scm_type')[0].focus();\n        }, 500);\n      });\n\n      // Toggle content\n      switches.on('change', function() {\n        toggleContent(content, this.value);\n      });\n    });\n});\n\n"],"sourceRoot":"webpack:///"}